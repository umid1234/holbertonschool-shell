#!/usr/bin/env bash
# Script that groups Apache log data by IP and HTTP code

awk '
    $1 ~ /^[0-9.]+$/ && $9 ~ /^[0-9]+$/ {
        key = $1 " " $9
        count[key]++
    }
    END {
        for (k in count)
            printf "%5d %s\n", count[k], k
    }
' apache-access.log | sort -nr -k1,1
